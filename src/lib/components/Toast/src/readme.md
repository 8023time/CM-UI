# Toast 组件变化记录


--- 
日期：2025.8.9
## 背景  
当前 Toast 组件存在状态管理复杂、动画触发不够流畅、多定时器开销较大等问题，影响性能和用户体验。

## 优化目标  
- 简化状态管理，减少渲染次数  
- 优化动画实现，减少重绘重排  
- 减少内存分配和多余定时器  

## 优化内容  
1. **状态简化**  
   - 用单一 `visible` 状态控制显示与隐藏  
   - 移除额外的 `isClosing` 状态  

2. **动画优化**  
   - 由 `animation` + `setTimeout` 改为 CSS `transition` + class 切换  
   - 添加 `will-change` 提升动画性能  

3. **内存优化**  
   - 将常量对象 `icons` 移至模块顶层，避免重复创建  

4. **定时器管理**  
   - 通过监听动画结束事件替代 `setTimeout` 延时关闭  

## 优化效果  
- 减少了状态更新次数，提升渲染效率  
- 动画更平滑不卡顿，体验更好  
- 减少内存占用和定时器数量，提升整体性能  

## 后续建议  
- 进一步抽象 Toast 容器，统一管理所有提示  
- 引入节流机制控制高频弹窗  

---

